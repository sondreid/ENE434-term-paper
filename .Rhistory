pred_loess_weather <- predict(loess_texas_weather)
texas_weather_bf_crisis %<>%
mutate(pred_loess  = loess_texas_weather$y,
upper = loess_texas_weather$upper,
lower = loess_texas_weather$lower)
texas_weather_bf_crisis %>%
ggplot() +
geom_line(aes(x = date, y = temp_avg, col = "observed")) +
geom_line(aes(x = date, y = pred_loess, col = "predicted")) +
geom_ribbon(aes(x = date, ymin = lower, ymax = upper), fill = "grey") +
scale_colour_manual(values = color_scheme) +
labs(title = "Loess estimation of weather data")
resid_vec <- (texas_weather_bf_crisis$pred_loess- texas_weather_bf_crisis$temp_avg)
training_rmse <- RMSE(.resid = resid_vec)
average_lower_temperatures <- texas_weather_bf_crisis %>%
filter(month(date) == 2) %>%
mutate(day = lubridate::day(date))
average_lower_temperatures %<>%
group_by(day) %>%
summarise(lower_avg = mean(lower),
temp_avg  = mean(temp_avg),
upper_avg = mean(upper))
texas_weather <- read.csv("Data/texas_weather.csv") %>%
dplyr::select(NAME:TMIN) %>%
rename(station = NAME,
date = DATE,
temp_avg = TAVG,
temp_min = TMIN,
temp_max = TMAX) %>%
mutate(date = lubridate::ymd(date)) %>%
dplyr::select(date, station, temp_avg, temp_min, temp_max)
# Compose new dataframe where three station data is averaged
texas_weather_avg <- texas_weather %>% group_by(date) %>%
filter(!is.na(temp_avg)) %>%
summarise(temp_avg = mean(temp_avg),
temp_min = mean(temp_min),
temp_max = mean(temp_max))
retrieveHour <- function(x) {
#'
#'Function that extracts hour  from date
hourVec <- (strsplit(x, split = ""))[[1]][13:14]
return (paste(hourVec[1], hourVec[2], ":00", sep = ""))
}
retrieveDate <- function(x) {
#'
#'Function that extracts hour  from date
date_vec <- (strsplit(x, split = ""))[[1]][2:11]
string <- ""
for (symbol in date_vec) {
if (symbol == ".") next
string <- paste(string, symbol, sep = "")
}
return (string)
}
processFrameGeneration <- function(df, type) {
#' Readies a generation data frame
#' @df : dataframe, input generation data frame
#' @type: string, type of power generation (e.g natural gas or nuclear)
#' @return: returns a processed data frame
oldName <- colnames(df)[1]
df %<>%
mutate(dateRaw = rownames(df),
hour = mapply(retrieveHour,dateRaw),
date = mapply(retrieveDate, dateRaw),
type = type,
date = lubridate::ymd(date)) %>%
rename("mWh_generated" = oldName) %>%
dplyr::select(-dateRaw)
rownames(df) <- seq(1, nrow(df))
return (df)
}
load(file = "Data/demand_data.Rdata")
load(file = "Data/generation_data.Rdata")
######################## Weather model fitting ##################
#################################################################
# Texas before crisis, e.g before 2021 data
texas_weather_bf_crisis <- texas_weather_avg %>% filter(year(date) < 2021)
loess_texas_weather <- texas_weather_bf_crisis %>%
mutate(date = as.numeric(date)) %>%
loess(temp_avg~date, data = .,  span = 0.05)
# Loess SD
loess_texas_weather <- texas_weather_bf_crisis %>%
mutate(date = as.numeric(date)) %>%
msir::loess.sd(x = texas_weather_bf_crisis$date, y = texas_weather_bf_crisis$temp_avg,
span = 0.01, nsigma = 1.96)
pred_loess_weather <- predict(loess_texas_weather)
texas_weather_bf_crisis %<>%
mutate(pred_loess  = loess_texas_weather$y,
upper = loess_texas_weather$upper,
lower = loess_texas_weather$lower)
texas_weather_bf_crisis %>%
ggplot() +
geom_line(aes(x = date, y = temp_avg, col = "observed")) +
geom_line(aes(x = date, y = pred_loess, col = "predicted")) +
geom_ribbon(aes(x = date, ymin = lower, ymax = upper), fill = "grey") +
scale_colour_manual(values = color_scheme) +
labs(title = "Loess estimation of weather data")
resid_vec <- (texas_weather_bf_crisis$pred_loess- texas_weather_bf_crisis$temp_avg)
training_rmse <- RMSE(.resid = resid_vec)
average_lower_temperatures <- texas_weather_bf_crisis %>%
filter(month(date) == 2) %>%
mutate(day = lubridate::day(date))
average_lower_temperatures %<>%
group_by(day) %>%
summarise(lower_avg = mean(lower),
temp_avg  = mean(temp_avg),
upper_avg = mean(upper))
average_lower_temperatures
loess_texas_weather
loss_texas_weather_cris
loess_texas_weather <- texas_weather_bf_crisis %>%
mutate(date = as.numeric(date)) %>%
msir::loess.sd(x = texas_weather_bf_crisis$date, y = texas_weather_bf_crisis$temp_avg,
span = 0.01, nsigma = 2.576)
loss_texas_weather_cris <- texas_temperature_crisis %>%
mutate(date = as.numeric(date)) %>%
msir::loess.sd(x = texas_weather_bf_crisis$date, y = texas_weather_bf_crisis$temp_avg,
span = 0.01, nsigma = 2.576)
texas_temperature_crisis <- texas_weather_avg %>% filter(year(date) ==  2021)
loess_texas_weather <- texas_weather_bf_crisis %>%
mutate(date = as.numeric(date)) %>%
msir::loess.sd(x = texas_weather_bf_crisis$date, y = texas_weather_bf_crisis$temp_avg,
span = 0.01, nsigma = 2.576)
loss_texas_weather_cris <- texas_temperature_crisis %>%
mutate(date = as.numeric(date)) %>%
msir::loess.sd(x = texas_weather_bf_crisis$date, y = texas_weather_bf_crisis$temp_avg,
span = 0.01, nsigma = 2.576)
texas_temperature <- read.csv("Data/texas_temperature.csv") %>%
dplyr::select(NAME:TMIN) %>%
rename(station = NAME,
date = DATE,
temp_avg = TAVG,
temp_min = TMIN,
temp_max = TMAX) %>%
mutate(date = lubridate::ymd(date)) %>%
dplyr::select(date, station, temp_avg, temp_min, temp_max)
View(texas_temperature)
x13_decomp <- seas(ts(demand_data_monthly %>%  filter(year(date) > 2015) %>%  dplyr::select(mWh_demand_monthly),
start = c("2016"),
frequency = 12)) ## Assuming one cold weather season
x13_decomp <- data.frame(x13_decomp) %>%
left_join(demand_data_monthly, by = "date")
color_scheme <- c("black", "#EDA63A", "#5093F8") # General color scheme for plots
facet_cols <- c("seasonal", "seasonaladj", "mWh_demand_monthly")
x13_decomp_pivot <- pivot_longer(x13_decomp, cols = all_of(facet_cols),  names_to = "components", values_to = "demand") %>%
dplyr::select(date, components, demand)
x13_decomp_pivot %>%
ggplot(aes(x = date, y = demand, col = components)) +
geom_line() +
facet_grid(rows = vars(components),
scales = "free_y")  +
scale_colour_manual(values = color_scheme) +
labs(title =  "Decomposition plots using X13 SEATS method")
x13_decomp %>% ggplot(aes(x = date, y = seasonal)) + geom_line() + labs(x = "Date")
generation_monthly <- generation_daily %>%
mutate(month = lubridate::month(date),
year  = lubridate::year(date)) %>%
group_by(month, year, type) %>%
summarise(mWh_generated = sum(mWh_generated)) %>%
unique() %>%
mutate(date = lubridate::ymd(paste(year, month, "-01"))) %>%
dplyr::select(-year,-month)
demand_data_monthly <- demand_data_daily %>%
mutate(month = lubridate::month(date),
year  = lubridate::year(date)) %>%
group_by(month, year) %>%
summarise(mWh_demand_monthly = sum(mWh_demand_daily)) %>%
ungroup() %>%
unique() %>%
mutate(date = lubridate::ymd(paste(year, month, "-01"))) %>%
dplyr::select(-year,-month)
######### Seasonal decomposition of demand ########################################
x13_decomp <- seas(ts(demand_data_monthly %>%  filter(year(date) > 2015) %>%  dplyr::select(mWh_demand_monthly),
start = c("2016"),
frequency = 12)) ## Assuming one cold weather season
x13_decomp <- data.frame(x13_decomp) %>%
left_join(demand_data_monthly, by = "date")
color_scheme <- c("black", "#EDA63A", "#5093F8") # General color scheme for plots
facet_cols <- c("seasonal", "seasonaladj", "mWh_demand_monthly")
x13_decomp_pivot <- pivot_longer(x13_decomp, cols = all_of(facet_cols),  names_to = "components", values_to = "demand") %>%
dplyr::select(date, components, demand)
x13_decomp_pivot %>%
ggplot(aes(x = date, y = demand, col = components)) +
geom_line() +
facet_grid(rows = vars(components),
scales = "free_y")  +
scale_colour_manual(values = color_scheme) +
labs(title =  "Decomposition plots using X13 SEATS method")
x13_decomp %>% ggplot(aes(x = date, y = seasonal)) + geom_line() + labs(x = "Date")
x13_decomp_pivot %>%
ggplot(aes(x = date, y = demand, col = components)) +
geom_line() +
facet_grid(rows = vars(components),
scales = "free_y")  +
scale_colour_manual(values = color_scheme) +
labs(title =  "Decomposition plots using X13 SEATS method")
texas_temperature_avg <- texas_temperature %>% group_by(date) %>%
filter(!is.na(temp_avg)) %>%
summarise(temp_avg = mean(temp_avg),
temp_min = mean(temp_min),
temp_max = mean(temp_max))
loess_texas_temperature_bf_crisis <- texas_temperature_avg %>%
filter(year(date) < 2021) %>%
mutate(date = as.numeric(date)) %>%
msir::loess.sd(x = texas_temperature_bf_crisis$date, y = texas_temperature_bf_crisis$temp_avg,
span = 0.01, nsigma = 2.576)
loss_texas_temperature_cris <- texas_temperature_avg %>%
filter(year(date) == 2021) %>%
mutate(date = as.numeric(date)) %>%
msir::loess.sd(x = texas_temperature_bf_crisis$date, y = texas_temperature_bf_crisis$temp_avg,
span = 0.01, nsigma = 2.576)
loess_texas_temperature_bf_crisis <- texas_temperature_avg %>%
filter(year(date) < 2021) %>%
mutate(date = as.numeric(date)) %>%
msir::loess.sd(x = texas_temperature_avg$date, y = texas_temperature_avg$temp_avg,
span = 0.01, nsigma = 2.576)
loss_texas_temperature_cris <- texas_temperature_avg %>%
filter(year(date) == 2021) %>%
mutate(date = as.numeric(date)) %>%
msir::loess.sd(x = texas_temperature_avg$date, y = texas_temperature_avg$temp_avg,
span = 0.01, nsigma = 2.576)
loss_texas_temperature_cris
loss_texas_temperature_cris$y %>% plot()
loss_texas_temperature_cris$x %>% plot()
loss_texas_temperature_cris$model
loess_texas_temperature_bf_crisis$model
texas_temperature_avg
texas_temperature_avg %>%
mutate(pred_loess_before = loess_texas_temperature_bf_crisis$y,
upper_before      = loess_texas_temperature_bf_crisis$upper,
lower_before      = loess_texas_temperature_bf_crisis$lower,
pred_loess_crisis = loss_texas_temperature_cris$y,
upper_crisis      = loss_texas_temperature_cris$upper,
lower_crisis      = loss_texas_temperature_cris$lower)
texas_temperature_avg %>%
ggplot() +
geom_line(aes(x = date, y = temp_avg, col = "observed"))
color_scheme <- c("black", "#EDA63A", "#5093F8") # General color scheme for plots
texas_temperature_avg %>%
filter(year(date) > 2006) %>%
ggplot() +
geom_line(aes(x = date, y = temp_avg, col = "observed")) +
geom_line(aes(x = date, y = pred_loess, col = "predicted bf crisis"),
data = texas_temperature_bf_crisis %>% filter(year(date) > 2006)) +
geom_line(aes(x = date, y = pred_loess, col = "predicted crisis"),
data = texas_temperature_crisis) +
scale_colour_manual(values = color_scheme) +
labs(title = "Loess estimation of weather data")
texas_temperature_bf_crisis <- texas_temperature_avg %>%
filter(year(date) < 2021)
texas_temperature_crisis <- texas_temperature_avg %>%
filter(year(date) == 2021)
##### Local smoothed regression useing loess sd
loess_texas_temperature_bf_crisis <- texas_temperature_bf_crisis %>%
mutate(date = as.numeric(date)) %>%
msir::loess.sd(x = texas_temperature_avg$date, y = texas_temperature_avg$temp_avg,
span = 0.01, nsigma = 2.576)
loss_texas_temperature_cris <- texas_temperature_crisis %>%
mutate(date = as.numeric(date)) %>%
msir::loess.sd(x = texas_temperature_avg$date, y = texas_temperature_avg$temp_avg,
span = 0.01, nsigma = 2.576)
## Store results from predicitons as well as confidence intervals
texas_temperature_crisis %<>%
mutate(pred_loess  = loess_texas_temperature$y,
upper = loess_texas_temperature$upper,
lower = loess_texas_temperature$lower)
texas_temperature_bf_crisis %<>%
mutate(pred_loess  = loess_texas_temperature$y,
upper = loess_texas_temperature$upper,
lower = loess_texas_temperature$lower)
texas_temperature_bf_crisis <- texas_temperature_avg %>%
filter(year(date) < 2021)
texas_temperature_crisis <- texas_temperature_avg %>%
filter(year(date) == 2021)
loess_texas_temperature_bf_crisis <- texas_temperature_bf_crisis %>%
mutate(date = as.numeric(date)) %>%
msir::loess.sd(x = texas_temperature_bf_crisis$date, y = texas_temperature_bf_crisis$temp_avg,
span = 0.01, nsigma = 2.576)
loss_texas_temperature_cris <- texas_temperature_crisis %>%
mutate(date = as.numeric(date)) %>%
msir::loess.sd(x = texas_temperature_crisis$date, y = texas_temperature_crisis$temp_avg,
span = 0.01, nsigma = 2.576)
texas_temperature_crisis
texas_temperature_crisis$temp_avg %>% plot()
texas_temperature_crisis %>% plot(x = date, y = temp_avg)
texas_temperature_crisis %>% plot(x = date)
texas_temperature_crisis %>% plot(date, temp_avg)
texas_temperature_crisis %>% plot(date, temp_avg)
plot(texas_temperature_crisis$date)
plot(texas_temperature_crisis$date, texas_temperature_crisis$temp_avg )
plot(texas_temperature_crisis$date, texas_temperature_crisis$temp_avg, ylab = "Temp", xlab = "Date" )
loss_texas_temperature_cris <- texas_temperature_crisis %>%
mutate(date = as.numeric(date)) %>%
msir::loess.sd(x = texas_temperature_crisis$date, y = texas_temperature_crisis$temp_avg,
span = 0.01, nsigma = 2.576)
loess_texas_temperature_bf_crisis <- texas_temperature_bf_crisis %>%
mutate(date = as.numeric(date)) %>%
msir::loess.sd(x = texas_temperature_bf_crisis$date, y = texas_temperature_bf_crisis$temp_avg,
span = 0.01, nsigma = 2.576)
loess_texas_temperature_bf_crisis
loess_texas_temperature_bf_crisis$y %>% plot(9)
loess_texas_temperature_bf_crisis$y %>% plot()
texas_temperature_crisis
texas_temperature_crisis$temp_avg
loss_texas_temperature_cris <- texas_temperature_crisis %>%
mutate(date = as.numeric(date))
sapply(loss_texas_temperature_cris , class)
loess_texas_temperature_cris <- texas_temperature_crisis %>%
mutate(date = as.numeric(date)) %>%
msir::loess.sd(x = texas_temperature_crisis$date, y = texas_temperature_crisis$temp_avg,
span = 0.01, nsigma = 2.576)
warnings()
loess_texas_temperature_cris
loess_texas_temperature_cris <- texas_temperature_crisis %>%
mutate(date = as.numeric(date)) %>%
unique()
loess_texas_temperature_cris
loess_texas_temperature_bf_crisis <- texas_temperature_bf_crisis %>%
mutate(date = as.numeric(date)) %>%
msir::loess.sd(x = texas_temperature_bf_crisis$date, y = texas_temperature_bf_crisis$temp_avg,
span = 0.01, nsigma = 2.576)
loess_texas_temperature_crisis <- texas_temperature_crisis %>%
mutate(date = as.numeric(date)) %>%
msir::loess.sd(x = texas_temperature_crisis$date, y = texas_temperature_crisis$temp_avg,
span = 0.01, nsigma = 1.96)
help(loess.sd)
loess_texas_temperature_crisis <- texas_temperature_crisis %>%
mutate(date = as.numeric(date)) %>%
msir::loess.sd(x = texas_temperature_crisis$date, y = texas_temperature_crisis$temp_avg)
loess_texas_temperature_crisis <- texas_temperature_crisis %>%
mutate(date = as.numeric(date)) %>%
msir::loess.sd(x = date, y = temp_avg)
msir::loess.sd(x = texas_temperature_crisis$date, y = texas_temperature_crisis$temp_avg
)
loess_texas_temperature_crisis <- msir::loess.sd(x = as.numeric(texas_temperature_crisis$date),
y = texas_temperature_crisis$temp_avg,
span = 0.01,
nsigma = 2.576)
msir::loess.sd(x = texas_temperature_crisis$date, y = texas_temperature_crisis$temp_avg)
msir::loess.sd(x = texas_temperature_crisis$date, y = texas_temperature_crisis$temp_avg)
loess_texas_temperature_crisis <- msir::loess.sd(x = as.numeric(texas_temperature_crisis$date),
y = texas_temperature_crisis$temp_avg)
loess_texas_temperature_crisis <- msir::loess.sd(x = as.numeric(texas_temperature_crisis$date),
y = texas_temperature_crisis$temp_avg,
span = 0.1)
loess_texas_temperature_crisis <- msir::loess.sd(x = as.numeric(texas_temperature_crisis$date),
y = texas_temperature_crisis$temp_avg,
span = 0.1,
nsigma = 2.57)
loess_texas_temperature_crisis <- msir::loess.sd(x = as.numeric(texas_temperature_crisis$date),
y = texas_temperature_crisis$temp_avg,
span = 0.1,
nsigma = 2.576)
loess_texas_temperature_crisis <- msir::loess.sd(x = as.numeric(texas_temperature_crisis$date),
y = texas_temperature_crisis$temp_avg,
span = 0.01,
nsigma = 2.576)
loess_texas_temperature_crisis <- msir::loess.sd(x = as.numeric(texas_temperature_crisis$date),
y = texas_temperature_crisis$temp_avg,
span = 0.05,
nsigma = 2.576)
loess_texas_temperature_crisis$y %>%  plot()
loess_texas_temperature_crisis$y %>%  plot()
lines(texas_temperature_crisis$temp_avg)
loess_texas_temperature_bf_crisis <- msir::loess.sd(x = as.numeric(texas_temperature_bf_crisis$date),
y = texas_temperature_bf_crisis$temp_avg,
span = 0.05,
nsigma = 2.576)
loess_texas_temperature_crisis <- msir::loess.sd(x = as.numeric(texas_temperature_crisis$date),
y = texas_temperature_crisis$temp_avg,
span = 0.05,
nsigma = 2.576)
loess_texas_temperature_bf_crisis <- msir::loess.sd(x = as.numeric(texas_temperature_bf_crisis$date),
y = texas_temperature_bf_crisis$temp_avg,
span = 0.05,
nsigma = 2.576)
loess_texas_temperature_crisis <- msir::loess.sd(x = as.numeric(texas_temperature_crisis$date),
y = texas_temperature_crisis$temp_avg,
span = 0.1,
nsigma = 2.576)
loess_texas_temperature_crisis$y %>%  plot()
lines(texas_temperature_crisis$temp_avg)
texas_temperature_crisis %<>%
mutate(pred_loess  = loess_texas_temperature_crisis$y,
upper = loess_texas_temperature_crisis$upper,
lower = loess_texas_temperature_crisis$lower)
texas_temperature_bf_crisis %<>%
mutate(pred_loess  = loess_texas_temperature_bf_crisis$y,
upper = loess_texas_temperature_bf_crisis$upper,
lower = loess_texas_temperature_bf_crisis$lower)
texas_temperature_crisis
texas_temperature_crisis %>% filter(month(date) == 2)
texas_temperature_crisis %>% filter(month(date) == 2) %>% tibble::view()
texas_temperature_bf_crisis %>% filter(month(date) == 2) %>% tibble::view()
### Plot general difference
texas_temperature_avg %>%
filter(year(date) > 2006) %>%
ggplot() +
geom_line(aes(x = date, y = temp_avg, col = "observed")) +
geom_line(aes(x = date, y = pred_loess, col = "predicted bf crisis"),
data = texas_temperature_bf_crisis %>% filter(year(date) > 2006)) +
geom_line(aes(x = date, y = pred_loess, col = "predicted crisis"),
data = texas_temperature_crisis) +
scale_colour_manual(values = color_scheme) +
labs(title = "Loess estimation of weather data")
average_lower_temperatures_bf_crisis <- texas_temperature_bf_crisis %>%
filter(month(date) == 2) %>%
mutate(day = lubridate::day(date)) %>%
group_by(day) %>%
summarise(lower_avg = mean(lower),
temp_avg  = mean(temp_avg),
upper_avg = mean(upper))
average_lower_temperatures_bf_crisis
average_lower_temperatures_bf_crisis$lower_avg %>%  plot()
average_lower_temperatures_bf_crisis$lower_avg %>%  view()
average_lower_temperatures_bf_crisis$lower_avg %>%  tibble::view()
texas_temperature_bf_crisis$lower
texas_temperature_bf_crisis$lower %>% arrange
texas_temperature_bf_crisis$lower %>% arrange()
texas_temperature_bf_crisis$lower %>% arrange(desc())
texas_temperature_bf_crisis$lower %>% desc()
texas_temperature_bf_crisis$lower %>% desc() %>% head()
texas_temperature_bf_crisis$lower %>% desc() %>% tail()
texas_temperature_bf_crisis %>% desc(lower)
texas_temperature_bf_crisis %>% arrange(desc())
texas_temperature_bf_crisis %>% arrange(desc(lower))
texas_temperature_bf_crisis %>% arrange(desc(lower)) %>% tail()
texas_temperature_crisis
average_lower_temperatures_bf_crisis <- texas_temperature_bf_crisis %>%
filter(month(date) == 2) %>%
mutate(day = lubridate::day(date)) %>%
group_by(day) %>%
summarise(lower_avg = mean(lower),
temp_avg  = mean(temp_avg),
upper_avg = mean(upper)) %>%
ungroup() %>%
bind_cols(texas_temperature_crisis %>% filter(month(date) == 2))
average_lower_temperatures_bf_crisis <- texas_temperature_bf_crisis %>%
filter(month(date) == 2) %>%
mutate(day = lubridate::day(date)) %>%
group_by(day) %>%
summarise(lower_avg = mean(lower),
temp_avg  = mean(temp_avg),
upper_avg = mean(upper)) %>%
ungroup()
nrow(average_lower_temperatures_bf_crisis )
tibble::view(average_lower_temperatures_bf_crisis )
average_lower_temperatures_bf_crisis <- texas_temperature_bf_crisis %>%
filter(month(date) == 2) %>%
mutate(day = lubridate::day(date)) %>%
group_by(day) %>%
summarise(lower_avg = mean(lower),
temp_avg  = mean(temp_avg),
upper_avg = mean(upper)) %>%
ungroup() %>%
filter(day =! 29) %>%
bind_cols(texas_temperature_crisis %>% filter(month(date) == 2))
average_lower_temperatures_bf_crisis <- texas_temperature_bf_crisis %>%
filter(month(date) == 2) %>%
mutate(day = lubridate::day(date)) %>%
group_by(day) %>%
summarise(lower_avg = mean(lower),
temp_avg  = mean(temp_avg),
upper_avg = mean(upper))
average_lower_temperatures_bf_crisis <- texas_temperature_bf_crisis %>%
filter(month(date) == 2) %>%
mutate(day = lubridate::day(date)) %>%
group_by(day) %>%
summarise(lower_avg = mean(lower),
temp_avg  = mean(temp_avg),
upper_avg = mean(upper)) %>%
ungroup() %>%
filter(day == !29) %>%
bind_cols(texas_temperature_crisis %>% filter(month(date) == 2))
average_lower_temperatures_bf_crisis <- texas_temperature_bf_crisis %>%
filter(month(date) == 2) %>%
mutate(day = lubridate::day(date)) %>%
group_by(day) %>%
summarise(lower_avg = mean(lower),
temp_avg  = mean(temp_avg),
upper_avg = mean(upper))
average_lower_temperatures_bf_crisis <- texas_temperature_bf_crisis %>%
filter(month(date) == 2) %>%
mutate(day = lubridate::day(date)) %>%
group_by(day) %>%
summarise(lower_avg = mean(lower),
temp_avg  = mean(temp_avg),
upper_avg = mean(upper)) %>%
ungroup() %>%
filter(day == 29) %>%
bind_cols(texas_temperature_crisis %>% filter(month(date) == 2))
average_lower_temperatures_bf_crisis
average_lower_temperatures_bf_crisis
average_lower_temperatures_bf_crisis <- texas_temperature_bf_crisis %>%
filter(month(date) == 2) %>%
mutate(day = lubridate::day(date)) %>%
group_by(day) %>%
summarise(lower_avg = mean(lower),
temp_avg  = mean(temp_avg),
upper_avg = mean(upper)) %>%
ungroup() %>%
filter(day == 29)
average_lower_temperatures_bf_crisis
average_lower_temperatures_bf_crisis <- texas_temperature_bf_crisis %>%
filter(month(date) == 2) %>%
mutate(day = lubridate::day(date)) %>%
group_by(day) %>%
summarise(lower_avg = mean(lower),
temp_avg  = mean(temp_avg),
upper_avg = mean(upper)) %>%
mutate(lower_2021  = (texas_temperature_crisis %>% filter(month(date) == 2))$lower)
help(bind_cols)
